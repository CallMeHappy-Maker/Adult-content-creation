<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard - Adult Content Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<script defer src="js/auth.js"></script>
<script defer src="js/admin.js"></script>
</head>
<body>
<div id="main-content">
  <header>
    <h1>Adult Content Marketplace</h1>
    <p>Admin Dashboard</p>
    <nav id="main-nav">
      <a href="/">Home</a>
      <div id="auth-nav"></div>
    </nav>
  </header>

  <main>
    <div id="admin-loading" class="admin-loading">
      <p>Checking admin access...</p>
    </div>

    <div id="admin-denied" class="hidden">
      <div class="admin-denied-box">
        <h2>Access Denied</h2>
        <p>You do not have admin privileges.</p>
        <a href="/" class="btn-primary">Go to Marketplace</a>
      </div>
    </div>

    <div id="admin-dashboard" class="hidden">
      <section class="admin-section">
        <h2>Platform Controls</h2>
        <div class="kill-switch-panel">
          <div class="kill-switch-row">
            <div>
              <strong>Pause Availability Bookings</strong>
              <p class="field-hint">Globally disable all time-based/availability bookings. Use for Stripe inquiries, legal concerns, or safety incidents. Historical data is preserved.</p>
            </div>
            <button id="kill-switch-btn" class="btn-danger" onclick="toggleKillSwitch()">Loading...</button>
          </div>
          <p id="kill-switch-status" class="field-hint"></p>
        </div>
      </section>

      <section class="admin-stats">
        <h2>Platform Overview</h2>
        <div class="stats-grid" id="stats-grid"></div>
      </section>

      <section class="admin-section">
        <div class="admin-section-header">
          <h2>User Management</h2>
          <span class="admin-count" id="user-count"></span>
        </div>
        <div class="admin-table-wrap">
          <table class="admin-table" id="users-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Type</th>
                <th>Status</th>
                <th>Location</th>
                <th>Messages</th>
                <th>Stripe</th>
                <th>Joined</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-tbody"></tbody>
          </table>
        </div>
      </section>

      <section class="admin-section">
        <div class="admin-section-header">
          <h2>Recent Conversations</h2>
          <span class="admin-count" id="convo-count"></span>
        </div>
        <div class="admin-table-wrap">
          <table class="admin-table" id="messages-table">
            <thead>
              <tr>
                <th>Creator</th>
                <th>Buyer</th>
                <th>Messages</th>
                <th>Last Message</th>
                <th>Started</th>
              </tr>
            </thead>
            <tbody id="messages-tbody"></tbody>
          </table>
        </div>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <div class="footer-links">
      <a href="/platform-role.html">Platform Policies</a>
      <a href="/fees.html">Fees & Refunds</a>
    </div>
    <p class="footer-copy">&copy; 2026 Adult Content Marketplace. All rights reserved.</p>
  </footer>
</div>
</body>
</html>
